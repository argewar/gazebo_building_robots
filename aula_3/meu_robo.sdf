<?xml version="1.0" ?>
<sdf version="1.8">
  <model name='meu_primeiro_robo' canonical_link='base_link'>
    <pose>0 0 0.1 0 0 0</pose>

    <link name='base_link'>
      <pose relative_to='__model__'>0 0 0.05 0 0 0</pose>
      <inertial>
        <mass>1.0</mass>
        <inertia><ixx>0.0108</ixx><iyy>0.0216</iyy><izz>0.0275</izz></inertia>
      </inertial>
      <visual name='visual'><geometry><box><size>0.3 0.2 0.1</size></box></geometry><material><ambient>0.0 0.0 1.0 1</ambient><diffuse>0.0 0.0 1.0 1</diffuse></material></visual>
      <collision name='collision'><geometry><box><size>0.3 0.2 0.1</size></box></geometry></collision>
      
      <sensor name='camera_sensor' type='camera'>
        <pose relative_to='base_link'>0.15 0 0.05 0 0 0</pose>
        <camera>
          <horizontal_fov>1.047</horizontal_fov>
          <image><width>640</width><height>480</height></image>
        </camera>
        <always_on>1</always_on>
        <update_rate>30</update_rate>
        <visualize>true</visualize>
        <topic>camera</topic>
      </sensor>

      <sensor name='lidar_sensor' type='gpu_lidar'>
      <pose relative_to='base_link'>0.0 0 0.06 0 0 0</pose>
      <always_on>1</always_on>
      <update_rate>10</update_rate>
      <visualize>true</visualize>
      <topic>/scan</topic>
      <lidar>
        <scan>
          <horizontal>
            <samples>720</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
          <vertical>
            <samples>1</samples>
            <resolution>1</resolution>
            <min_angle>0</min_angle>
            <max_angle>0</max_angle>
          </vertical>
        </scan>
        <range>
          <min>0.1</min>
          <max>12.0</max>
        </range>
      </lidar>
    </sensor>

    </link>

    <link name='left_wheel_link'><pose relative_to="base_link">0.1 0.12 0 -1.5707 0 0</pose><inertial><mass>0.1</mass><inertia><ixx>0.00015</ixx><iyy>0.00015</iyy><izz>0.00012</izz></inertia></inertial><visual name='visual'><geometry><cylinder><radius>0.05</radius><length>0.04</length></cylinder></geometry><material><ambient>0.1 0.1 0.1 1</ambient><diffuse>0.1 0.1 0.1 1</diffuse></material></visual><collision name='collision'><geometry><cylinder><radius>0.05</radius><length>0.04</length></cylinder></geometry></collision></link>
    <link name='right_wheel_link'><pose relative_to="base_link">0.1 -0.12 0 -1.5707 0 0</pose><inertial><mass>0.1</mass><inertia><ixx>0.00015</ixx><iyy>0.00015</iyy><izz>0.00012</izz></inertia></inertial><visual name='visual'><geometry><cylinder><radius>0.05</radius><length>0.04</length></cylinder></geometry><material><ambient>0.1 0.1 0.1 1</ambient><diffuse>0.1 0.1 0.1 1</diffuse></material></visual><collision name='collision'><geometry><cylinder><radius>0.05</radius><length>0.04</length></cylinder></geometry></collision></link>
    <link name='caster_link'><pose relative_to="base_link">-0.1 0 -0.03 0 0 0</pose><inertial><mass>0.05</mass><inertia><ixx>0.00002</ixx><iyy>0.00002</iyy><izz>0.00002</izz></inertia></inertial><visual name='visual'><geometry><sphere><radius>0.02</radius></sphere></geometry><material><ambient>0.1 0.1 0.1 1</ambient><diffuse>0.1 0.1 0.1 1</diffuse></material></visual><collision name='collision'><geometry><sphere><radius>0.02</radius></sphere></geometry></collision></link>

    <joint name='left_wheel_joint' type='revolute'><parent>base_link</parent><child>left_wheel_link</child><axis><xyz expressed_in='__model__'>0 1 0</xyz></axis></joint>
    <joint name='right_wheel_joint' type='revolute'><parent>base_link</parent><child>right_wheel_link</child><axis><xyz expressed_in='__model__'>0 1 0</xyz></axis></joint>
    <joint name='caster_joint' type='ball'><parent>base_link</parent><child>caster_link</child></joint>

    <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive"><left_joint>left_wheel_joint</left_joint><right_joint>right_wheel_joint</right_joint><wheel_separation>0.24</wheel_separation><wheel_radius>0.05</wheel_radius><topic>/cmd_vel</topic><odom_topic>/odom</odom_topic></plugin>
  </model>
</sdf>